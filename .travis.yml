language: python

python:
  - "3.6"

service:
  - postgresql

env:
  - APP_SETTINGS="api.server.config.TestingConfig" SECRET_KEY="this_is_the_secret_key" PGDATABASE="stackoverflow_test" PGUSER="postgres" PGPASSWORD=""

before_script:
  - "psql -c 'create database stackoverflow_test;' -U postgres"

install:
  - pip install -r requirements.txt
  - pip install coveralls

script:
  - python migrate.py
  - nosetests --exe -v
  - nosetests --exe --with-coverage --cover-package=api/server
  - coveralls

after_success:
  - "coveralls"
